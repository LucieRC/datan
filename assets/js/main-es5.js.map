{"version":3,"sources":["main.js"],"names":["$","document","ready","popover","placement","container","trigger","html","unveil","onload","removeClass","on","e","preventDefault","tooltip","btn","window","scroll","scrollTop","addClass","distance","speed","duration","animate","length","$carousel","flickity","prevNextButtons","pageDots","freeScroll","contain","flkty","data","cw","width","css","objects","getElementsByClassName","Array","from","map","item","img","Image","matchMedia","matches","src","dataset","tablet","classList","remove","nodeName","style","backgroundImage","$el","$ps","$up","totalHeight","click","margin","$p","parent","find","each","outerHeight","parseInt","height","fadeOut","ajax","url","type","serialize","dataType","success","ac","hide","show","error","err","console","log","expr","icontains","a","i","m","text","toUpperCase","indexOf","val"],"mappings":"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","sourcesContent":["$(document).ready(function () {\n  // popover\n  $(\"[data-toggle=popover]\").popover({\n    placement: 'top',\n    container: 'body',\n    trigger: 'focus',\n    html: true\n  });\n\n  $(\".img-lazy\").unveil(200, function () {\n    this.onload = function () {\n      $(this).removeClass(\"placeholder\")\n    }\n  });\n});\n\n$(function () {\n  // prevents jumping\n  $(\"a.pop-me-over\").on(\"click\", function (e) {\n    e.preventDefault();\n    return true;\n  });\n  $(\".pop-me-over\").popover();\n});\n\n$(function () {\n  $('[data-toggle=\"tooltip\"]').tooltip()\n})\n\n/*\n################\n               Button UP\n################\n*/\n\nvar btn = $('#btnup');\n\n$(window).scroll(function () {\n  if ($(window).scrollTop() > 300) {\n    btn.addClass('show');\n  } else {\n    btn.removeClass('show');\n  }\n});\n\nbtn.on('click', function (e) {\n  e.preventDefault();\n  var distance = $(window).scrollTop();\n  var speed = 2;\n  var duration = $(window).scrollTop() / speed;\n  $('html, body').animate({\n    scrollTop: 0\n  }, 2000, 'swing'); // for all browsers\n});\n\n/*\n################\n               Collapse button\n################\n*/\n$(document).ready(function () {\n  $(\"#collapseProximity\").on(\"hide.bs.collapse\", function () {\n    $(\"#btn-ranking\").html('Voir tout le classement');\n  });\n  $(\"#collapseProximity\").on(\"show.bs.collapse\", function () {\n    $(\"#btn-ranking\").html('Fermer');\n  });\n});\n\n/*\n################\n               Flickity\n################\n*/\n\n// init Flickity\nif ($('.carousel-cards').length > 0) {\n  var $carousel = $('.carousel-cards').flickity({\n    prevNextButtons: false,\n    pageDots: false,\n    freeScroll: true,\n    contain: true\n  });\n  // Flickity instance\n  var flkty = $carousel.data('flickity');\n  // previous\n  $('.button--previous').on('click', function () {\n    $carousel.flickity('previous');\n  });\n  // next\n  $('.button--next').on('click', function () {\n    $carousel.flickity('next');\n  });\n}\n\n/*\n################\n                no-img (votes controller)\n################\n*/\n\nvar cw = $('.no-img').width();\n$('.no-img').css({ 'height': cw + 'px' });\n\n/*\n################\n                async_home\n################\n*/\n\n(() => {\n  'use strict';\n  // Page is loaded\n  const objects = document.getElementsByClassName('async_home');\n  Array.from(objects).map((item) => {\n    // Start loading image\n    const img = new Image();\n    if (window.matchMedia(\"(max-width: 575.98px)\").matches) {\n      /*img.src = item.dataset.mobile;\n      img.onload = () => {\n        item.classList.remove('async_background');\n        return item.nodeName === 'IMG' ?\n          item.src = item.dataset.src :\n          item.style.backgroundImage = `linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(${item.dataset.mobile})`\n      }; */\n    } else if (window.matchMedia(\"(max-width: 970px)\").matches) {\n      // Once image is loaded replace the src of the HTML element\n      img.src = item.dataset.tablet;\n      img.onload = () => {\n        item.classList.remove('async_home');\n        return item.nodeName === 'IMG' ?\n          item.src = item.dataset.src :\n          item.style.backgroundImage = `linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(${item.dataset.tablet})`\n      };\n    } else {\n      // Once image is loaded replace the src of the HTML element\n      img.src = item.dataset.src;\n      img.onload = () => {\n        item.classList.remove('async_home');\n        return item.nodeName === 'IMG' ?\n          item.src = item.dataset.src :\n          item.style.backgroundImage = `linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(${item.dataset.src})`\n      };\n    }\n\n  });\n})();\n\n/*\n################\n                Read more\n################\n*/\n\n$(function () {\n\n  var $el, $ps, $up, totalHeight;\n\n  $(\".read-more-container .btn\").click(function () {\n\n    // IE 7 doesn't even get this far. I didn't feel like dicking with it.\n\n    totalHeight = 0;\n    var margin = 0;\n    $el = $(this);\n    let $p = $el.parent();\n    $up = $p.parent();\n    $ps = $up.find(\"p:not('.read-more-button')\");\n\n    // measure how tall inside should be by adding together heights of all inside paragraphs (except read-more paragraph)\n    $ps.each(function () {\n      totalHeight += $(this).outerHeight();\n      margin = parseInt($(this).css(\"margin-bottom\"), 10);\n      totalHeight = totalHeight + margin;\n    });\n\n    totalHeight = totalHeight - margin;\n\n    $up\n      .css({\n        // Set height to prevent instant jumpdown when max height is removed\n        \"height\": $up.height(),\n        \"max-height\": 9999\n      })\n      .animate({\n        \"height\": totalHeight\n      });\n\n    // fade out read-more\n    $p.fadeOut();\n\n    // prevent jump-down\n    return false;\n\n  });\n\n});\n\n\n/*\n##########\nNEWSLETTER\n##########\n*/\n$('#newsletterForm').on('submit', (e) => {\n  e.preventDefault();\n  $.ajax({\n    url: \"api/newsletter/create_newsletter\",\n    type: \"POST\",\n    data: $('#newsletterForm').serialize(),\n    dataType: 'json',\n    success: function (ac) {\n      if (!ac) {\n        $('#newsletterForm').hide();\n        $('#modalFail').show();\n      } else {\n        $('#newsletterForm').hide();\n        $('#modalSubscription').show();\n      }\n    },\n    error: function (err) {\n      console.log('err', err)\n      $('#newsletterForm').hide();\n      $('#modalFail').show();\n    }\n  });\n  return true;\n})\n\n\n/*\n##########\nFAQ\n##########\n*/\n$.expr[':'].icontains = function(a, i, m) {\n  console.log($(a).text().toUpperCase()\n  .indexOf(m[3].toUpperCase()) >= 0);\n  return $(a).text().toUpperCase()\n      .indexOf(m[3].toUpperCase()) >= 0;\n};\n$('#searchfaq').on('keyup', function(e){\n  console.log($(\".card-question:icontains('\" + $(this).val() + \"')\"));\n  $(\".card-question\").hide();\n  $(\".card-question:icontains('\" + $(this).val() + \"')\").show();\n})"],"file":"main-es5.js"}