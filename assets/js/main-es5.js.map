{"version":3,"sources":["main.js"],"names":["$","document","ready","popover","placement","container","trigger","html","unveil","onload","removeClass","on","e","preventDefault","tooltip","btn","window","scroll","scrollTop","addClass","distance","speed","duration","animate","length","$carousel","flickity","prevNextButtons","pageDots","freeScroll","contain","flkty","data","cw","width","css","objects","getElementsByClassName","Array","from","map","item","img","Image","matchMedia","matches","src","dataset","tablet","classList","remove","nodeName","style","backgroundImage","$el","$ps","$up","totalHeight","click","margin","$p","parent","find","each","outerHeight","parseInt","height","fadeOut","ajax","url","type","serialize","dataType","success","ac","hide","show","error","err","console","log","array","val","split","match","join","reverse","regex","RegExp","filter","test","text"],"mappings":"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","sourcesContent":["$(document).ready(function () {\r\n  // popover\r\n  $(\"[data-toggle=popover]\").popover({\r\n    placement: 'top',\r\n    container: 'body',\r\n    trigger: 'focus',\r\n    html: true\r\n  });\r\n\r\n  $(\".img-lazy\").unveil(200, function () {\r\n    this.onload = function () {\r\n      $(this).removeClass(\"placeholder\")\r\n    }\r\n  });\r\n});\r\n\r\n$(function () {\r\n  // prevents jumping\r\n  $(\"a.pop-me-over\").on(\"click\", function (e) {\r\n    e.preventDefault();\r\n    return true;\r\n  });\r\n  $(\".pop-me-over\").popover();\r\n});\r\n\r\n$(function () {\r\n  $('[data-toggle=\"tooltip\"]').tooltip()\r\n})\r\n\r\n/*\r\n################\r\n               Button UP\r\n################\r\n*/\r\n\r\nvar btn = $('#btnup');\r\n\r\n$(window).scroll(function () {\r\n  if ($(window).scrollTop() > 300) {\r\n    btn.addClass('show');\r\n  } else {\r\n    btn.removeClass('show');\r\n  }\r\n});\r\n\r\nbtn.on('click', function (e) {\r\n  e.preventDefault();\r\n  var distance = $(window).scrollTop();\r\n  var speed = 2;\r\n  var duration = $(window).scrollTop() / speed;\r\n  $('html, body').animate({\r\n    scrollTop: 0\r\n  }, 2000, 'swing'); // for all browsers\r\n});\r\n\r\n/*\r\n################\r\n               Collapse button\r\n################\r\n*/\r\n$(document).ready(function () {\r\n  $(\"#collapseProximity\").on(\"hide.bs.collapse\", function () {\r\n    $(\"#btn-ranking\").html('Voir tout le classement');\r\n  });\r\n  $(\"#collapseProximity\").on(\"show.bs.collapse\", function () {\r\n    $(\"#btn-ranking\").html('Fermer');\r\n  });\r\n});\r\n\r\n/*\r\n################\r\n               Flickity\r\n################\r\n*/\r\n\r\n// init Flickity\r\nif ($('.carousel-cards').length > 0) {\r\n  var $carousel = $('.carousel-cards').flickity({\r\n    prevNextButtons: false,\r\n    pageDots: false,\r\n    freeScroll: true,\r\n    contain: true\r\n  });\r\n  // Flickity instance\r\n  var flkty = $carousel.data('flickity');\r\n  // previous\r\n  $('.button--previous').on('click', function () {\r\n    $carousel.flickity('previous');\r\n  });\r\n  // next\r\n  $('.button--next').on('click', function () {\r\n    $carousel.flickity('next');\r\n  });\r\n}\r\n\r\n/*\r\n################\r\n                no-img (votes controller)\r\n################\r\n*/\r\n\r\nvar cw = $('.no-img').width();\r\n$('.no-img').css({ 'height': cw + 'px' });\r\n\r\n/*\r\n################\r\n                async_home\r\n################\r\n*/\r\n\r\n(() => {\r\n  'use strict';\r\n  // Page is loaded\r\n  const objects = document.getElementsByClassName('async_home');\r\n  Array.from(objects).map((item) => {\r\n    // Start loading image\r\n    const img = new Image();\r\n    if (window.matchMedia(\"(max-width: 575.98px)\").matches) {\r\n      /*img.src = item.dataset.mobile;\r\n      img.onload = () => {\r\n        item.classList.remove('async_background');\r\n        return item.nodeName === 'IMG' ?\r\n          item.src = item.dataset.src :\r\n          item.style.backgroundImage = `linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(${item.dataset.mobile})`\r\n      }; */\r\n    } else if (window.matchMedia(\"(max-width: 970px)\").matches) {\r\n      // Once image is loaded replace the src of the HTML element\r\n      img.src = item.dataset.tablet;\r\n      img.onload = () => {\r\n        item.classList.remove('async_home');\r\n        return item.nodeName === 'IMG' ?\r\n          item.src = item.dataset.src :\r\n          item.style.backgroundImage = `linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(${item.dataset.tablet})`\r\n      };\r\n    } else {\r\n      // Once image is loaded replace the src of the HTML element\r\n      img.src = item.dataset.src;\r\n      img.onload = () => {\r\n        item.classList.remove('async_home');\r\n        return item.nodeName === 'IMG' ?\r\n          item.src = item.dataset.src :\r\n          item.style.backgroundImage = `linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(${item.dataset.src})`\r\n      };\r\n    }\r\n\r\n  });\r\n})();\r\n\r\n/*\r\n################\r\n                Read more\r\n################\r\n*/\r\n\r\n$(function () {\r\n\r\n  var $el, $ps, $up, totalHeight;\r\n\r\n  $(\".read-more-container .btn\").click(function () {\r\n\r\n    // IE 7 doesn't even get this far. I didn't feel like dicking with it.\r\n\r\n    totalHeight = 0;\r\n    var margin = 0;\r\n    $el = $(this);\r\n    let $p = $el.parent();\r\n    $up = $p.parent();\r\n    $ps = $up.find(\"p:not('.read-more-button')\");\r\n\r\n    // measure how tall inside should be by adding together heights of all inside paragraphs (except read-more paragraph)\r\n    $ps.each(function () {\r\n      totalHeight += $(this).outerHeight();\r\n      margin = parseInt($(this).css(\"margin-bottom\"), 10);\r\n      totalHeight = totalHeight + margin;\r\n    });\r\n\r\n    totalHeight = totalHeight - margin;\r\n\r\n    $up\r\n      .css({\r\n        // Set height to prevent instant jumpdown when max height is removed\r\n        \"height\": $up.height(),\r\n        \"max-height\": 9999\r\n      })\r\n      .animate({\r\n        \"height\": totalHeight\r\n      });\r\n\r\n    // fade out read-more\r\n    $p.fadeOut();\r\n\r\n    // prevent jump-down\r\n    return false;\r\n\r\n  });\r\n\r\n});\r\n\r\n\r\n/*\r\n##########\r\nNEWSLETTER\r\n##########\r\n*/\r\n$('#newsletterForm').on('submit', (e) => {\r\n  e.preventDefault();\r\n  $.ajax({\r\n    url: \"api/newsletter/create_newsletter\",\r\n    type: \"POST\",\r\n    data: $('#newsletterForm').serialize(),\r\n    dataType: 'json',\r\n    success: function (ac) {\r\n      if (!ac) {\r\n        $('#newsletterForm').hide();\r\n        $('#modalFail').show();\r\n      } else {\r\n        $('#newsletterForm').hide();\r\n        $('#modalSubscription').show();\r\n      }\r\n    },\r\n    error: function (err) {\r\n      console.log('err', err)\r\n      $('#newsletterForm').hide();\r\n      $('#modalFail').show();\r\n    }\r\n  });\r\n  return true;\r\n})\r\n\r\n\r\n/*\r\n##########\r\nFAQ\r\n##########\r\n*/\r\n$('#searchfaq').on('keyup', function (e) {\r\n  $(\".card-question\").hide();\r\n  var array = $(this).val().split(\" \");\r\n  var match = \"(?:\" + array.join(\".*\") + \"|\";\r\n  array.reverse();\r\n  match += array.join(\".*\") + \")\";\r\n  var regex = new RegExp(match, 'i');\r\n\r\n  $(\".card-question\").filter(function () {\r\n    return regex.test($(this).text());\r\n  }).show();\r\n\r\n})"],"file":"main-es5.js"}